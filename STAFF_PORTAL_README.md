# Портал сотрудников AgroMarket Staff

Отдельный портал для сотрудников компании с системой прав доступа.

## Структура проекта

```
/src/staff/
├── App.tsx                      # Главный компонент портала
├── routes.ts                    # Роутинг портала
├── context/
│   └── StaffAuthContext.tsx     # Контекст авторизации и прав
├── components/
│   └── StaffLayout.tsx          # Layout с сайдбаром
└── pages/
    ├── StaffLogin.tsx           # Страница входа
    ├── StaffDashboard.tsx       # Дашборд с метриками
    ├── StaffOrders.tsx          # Список заказов
    ├── StaffOrderDetail.tsx     # Детали заказа
    ├── StaffVendors.tsx         # Заявки поставщиков
    ├── StaffUsers.tsx           # Список пользователей
    ├── StaffFeedback.tsx        # Обращения в поддержку
    ├── StaffFeedbackDetail.tsx  # Детали обращения
    ├── StaffAudit.tsx           # Журнал действий
    ├── StaffSearch.tsx          # Глобальный поиск
    ├── StaffEmployees.tsx       # Управление сотрудниками
    ├── StaffRoles.tsx           # Управление ролями
    └── StaffProfile.tsx         # Профиль и смена пароля
```

## Роли и разрешения

### Предустановленные роли:

1. **Super Admin** - полный доступ ко всем функциям
2. **Admin** - доступ ко всему кроме управления сотрудниками и ролями
3. **Support** - только обращения и поиск

### Разрешения (Permissions):

- `dashboard.view` - Просмотр дашборда
- `orders.view` - Просмотр заказов
- `orders.edit` - Редактирование заказов
- `vendors.view` - Просмотр поставщиков
- `vendors.approve` - Одобрение поставщиков
- `feedback.view` - Просмотр обращений
- `feedback.edit` - Редактирование обращений
- `users.view` - Просмотр пользователей
- `users.edit` - Редактирование пользователей
- `audit.view` - Просмотр журнала действий
- `search.view` - Глобальный поиск
- `staff.manage` - Управление сотрудниками
- `roles.manage` - Управление ролями

## Основные страницы

### 1. Вход (`/staff/login`)
- Логин и пароль
- Демо доступ: admin / admin

### 2. Дашборд (`/staff/dashboard`)
- Метрики (заказы, выручка, пользователи)
- Последние заказы
- Заявки поставщиков на одобрение

### 3. Заказы (`/staff/orders`)
- Список всех заказов
- Поиск по номеру
- Фильтр по статусу
- Детальная карточка заказа

### 4. Поставщики (`/staff/vendors`)
- Заявки на одобрение
- Кнопка одобрения (при наличии права)

### 5. Пользователи (`/staff/users`)
- Список пользователей маркетплейса
- Фильтр по роли

### 6. Обращения (`/staff/feedback`)
- Тикеты поддержки
- Фильтр по статусу
- Форма ответа пользователю
- Внутренние заметки

### 7. Журнал действий (`/staff/audit`)
- Все действия в системе
- Фильтр по типу действия

### 8. Поиск (`/staff/search`)
- Глобальный поиск по:
  - Пользователям
  - Заказам
  - Товарам
  - Компаниям
  - Обращениям

### 9. Сотрудники (`/staff/employees`)
- Список сотрудников портала
- Создание нового сотрудника
- Редактирование
- Активация/деактивация

### 10. Роли (`/staff/roles`)
- Управление ролями
- Настройка разрешений
- Системные роли защищены от удаления

### 11. Профиль (`/staff/profile`)
- Информация о текущем сотруднике
- Смена пароля

## Особенности

### Система прав
Каждый пункт меню и функция проверяет наличие соответствующего разрешения у роли пользователя.

### Адаптивность
- Десктоп: сайдбар всегда виден
- Мобильный: бургер-меню

### Безопасность
- Только авторизованные пользователи
- Нет регистрации
- Система ролей и разрешений
- Логирование всех действий

## Демо данные

По умолчанию создан Super Admin:
- Логин: `admin`
- Пароль: `admin`

## Интеграция с основным маркетплейсом

Портал сотрудников полностью независим от основного маркетплейса:
- Отдельный роутинг (`/staff/*`)
- Отдельный контекст авторизации
- Отдельные компоненты и стили

## Как использовать

1. Запустите приложение
2. Перейдите на `/staff/login`
3. Войдите с учетными данными
4. Навигация по доступным разделам зависит от роли

## Дальнейшее развитие

- Интеграция с реальным backend API
- Двухфакторная аутентификация
- Расширенная аналитика
- Экспорт отчетов
- Уведомления в реальном времени
