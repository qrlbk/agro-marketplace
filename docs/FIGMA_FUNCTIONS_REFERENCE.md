# Агро Маркетплейс — полный перечень функций для дизайна в Figma

Документ описывает **все экраны, элементы интерфейса и действия пользователя**, чтобы можно было спроектировать веб-страницы в Figma.

---

## 1. ОБЩИЕ ЭЛЕМЕНТЫ (на всех страницах)

### 1.1 Шапка (Header)
- **Логотип** — клик ведёт на главную (`/`).
- **Поиск** — поле ввода «Поиск по артикулу или названию…», отправка формы ведёт на `/catalog?q=...`.
- **Навигация (десктоп):**
  - Каталог → `/catalog`
  - Гараж → `/garage` (только для авторизованных)
  - Заказы → `/orders` (только для авторизованных)
  - «Кабинет продавца» (выпадающее меню, только vendor/admin):
    - Мои товары → `/vendor/products`
    - Склад → `/vendor/warehouse`
    - Прайс-лист → `/vendor`
- **Переключатель языка** — RU / KZ (два варианта).
- **Иконка уведомлений** — ссылка на `/notifications`, бейдж с числом непрочитанных (только vendor/admin).
- **Иконка корзины** — ссылка на `/cart`, бейдж с количеством товаров (только для авторизованных).
- **Профиль пользователя** (выпадающее меню):
  - Телефон и роль.
  - Админка → `/admin` (только admin).
  - Служба поддержки → `/feedback`.
  - Выйти.
- **Кнопка «Войти»** — если пользователь не авторизован.

### 1.2 Мобильное меню
- Кнопка гамбургера открывает/закрывает меню с теми же пунктами, что и в десктопе.

### 1.3 Чат-помощник (внизу справа)
- Плавающая кнопка — открыть/закрыть панель чата.
- Панель: список сообщений (пользователь / ассистент), поле ввода, кнопка «Отправить».
- При первом открытии — модальное окно с оговоркой (подтверждение).

---

## 2. СТРАНИЦЫ И ФУНКЦИИ ПО РОУТАМ

### 2.1 Главная / Каталог — `/`, `/catalog`

**Назначение:** просмотр и поиск товаров.

**Элементы:**
- Заголовок страницы (например «Каталог»).
- **Фильтры:**
  - Категория — выпадающий список (дерево категорий).
  - Техника (машина) — выпадающий список «Выберите технику» (показывается в категориях запчастей).
  - Сортировка: по умолчанию / по цене ↑↓ / по названию ↑↓.
- **Виджет «Гараж»** (если выбрана техника): текущая техника, кнопки «Сбросить фильтр», «Добавить технику».
- Сетка карточек товаров (или скелетон при загрузке).

**Карточка товара (ProductCard):**
- Фото (или плейсхолдер).
- Название (клик → страница товара).
- Артикул.
- Рейтинг (звёзды + число отзывов), если есть.
- Бейдж «В наличии» / «Под заказ».
- Остаток в штуках (если в наличии).
- Бейдж «Подходит к вашей технике» (если выбрана техника и товар совместим).
- Цена.
- Кнопка «В корзину».

**Пустое состояние:** сообщение «Товары не найдены» или аналогичное.

---

### 2.2 Страница товара — `/products/:id`

**Назначение:** детали товара, совместимость, отзывы, добавление в корзину.

**Блоки:**
- Хлебные крошки: Каталог → Название товара.
- Галерея изображений (или одно фото).
- Название, артикул, цена.
- Рейтинг продавца (если есть).
- **Совместимость с техникой:** выбор машины из гаража, кнопка «Проверить совместимость», результат (подходит / не подходит / ошибка).
- Количество (число для добавления в корзину).
- Кнопка «В корзину».
- Описание, характеристики, состав (текстовые блоки).
- **Отзывы:**
  - Средний рейтинг и количество.
  - Список отзывов (автор, рейтинг, текст, дата).
  - Кнопка «Показать ещё» (пагинация).
  - Форма «Оставить отзыв» (звёзды 1–5, текст), кнопка «Отправить» (только для авторизованных).

**Состояния:** загрузка (скелетон), ошибка (товар не найден), успешное добавление в корзину (тост).

---

### 2.3 Вход — `/login`

**Назначение:** авторизация по телефону (OTP или демо-логин).

**Варианты входа:**
1. **Демо-логин:** поле «Телефон», поле «Пароль», кнопка «Войти».
2. **По SMS:** шаг 1 — поле «Телефон», кнопка «Получить код»; шаг 2 — поле «Код из SMS», кнопка «Подтвердить».

**Элементы:**
- Ошибка (текст под формой).
- После успешного входа — редирект (гость → онбординг, остальные → каталог или запомненная страница).

---

### 2.4 Онбординг — `/onboarding`

**Доступ:** только для роли `guest` после входа.

**Шаги:**
1. **Выбор роли:** три варианта — Покупатель, Фермер, Поставщик (кнопки/карточки).
2. **Форма в зависимости от роли:**

**Покупатель (user):**
- Имя, Регион (выпадающий список областей РК).
- Кнопка «Завершить» → редирект в каталог.

**Фермер (farmer):**
- Имя, Регион.
- БИН (10–12 цифр).
- Название компании, Юр. адрес, ФИО руководителя (опционально подтягиваются по БИН).
- Кнопка «Проверить БИН» (подстановка данных по БИН).
- Кнопка «Завершить» → редирект в гараж.

**Поставщик (vendor):**
- То же, что у фермера, плюс: Банк ИИК, Банк БИК, Контактное лицо.
- Кнопка «Завершить» → заявка на рассмотрение, редирект в каталог; статус компании «ожидает одобрения».

**Элементы:** сообщение об ошибке, индикатор загрузки при отправке.

---

### 2.5 Гараж — `/garage`

**Доступ:** авторизованные, после онбординга (не guest).

**Назначение:** список техники пользователя, добавление/удаление, советы по ТО.

**Элементы:**
- Заголовок «Гараж».
- **Добавить технику:** выбор машины (выпадающий список: бренд, модель, год), серийный номер, моточасы; кнопка «Добавить».
- Список карточек: техника (бренд, модель, год), серийный номер, моточасы; кнопка «Удалить».
- **Рекомендации по ТО:** блок с советами по обслуживанию на основе техники в гараже (загрузка с API).
- Ошибки валидации (например, моточасы не число).

---

### 2.6 Корзина — `/cart`

**Доступ:** только авторизованные.

**Состояния:**
- **Пустая корзина:** иконка, текст «Корзина пуста», кнопка «Перейти в каталог».
- **С товарами:**
  - Хлебные крошки: Каталог → Корзина.
  - Список позиций: название, цена, количество, кнопка «Удалить».
  - Поле «Адрес доставки».
  - Итоговая сумма.
  - Кнопка «Оформить заказ».
  - Ошибка (например, «Укажите адрес доставки»).

**Действия:** удалить товар (с подтверждением), оформить заказ → редирект на `/orders`.

---

### 2.7 Мои заказы — `/orders`

**Доступ:** авторизованные, после онбординга.

**Состояния:**
- Загрузка (скелетон).
- Ошибка + кнопка «Повторить».
- Нет заказов: текст, кнопка «В каталог».
- Список заказов: ID, сумма, статус, дата, состав (товары, кол-во, цена); каждый заказ — карточка/блок.

---

### 2.8 Уведомления — `/notifications`

**Доступ:** авторизованные (для vendor/admin отображается в шапке).

**Элементы:**
- Заголовок «Уведомления».
- Список: тип (новый отзыв, сообщение поддержки), текст/превью, дата, кнопка «Отметить прочитанным» (если не прочитано).
- Пустое состояние: «Нет уведомлений».

---

### 2.9 Обратная связь (поддержка) — `/feedback`

**Доступ:** всем (с авторизацией или без).

**Элементы:**
- Заголовок «Написать в поддержку».
- Форма: тема (выпадающий список: вопрос по заказу, по товару, доставка, оплата, другое — при «другое» поле ввода), сообщение (textarea), контактный телефон (обязателен для анонимных).
- Кнопка «Отправить».
- После отправки: «Спасибо, мы ответим…».

---

### 2.10 Кабинет продавца (Vendor)

#### 2.10.1 Загрузка прайс-листа — `/vendor`

**Доступ:** vendor или admin; если статус компании «ожидает одобрения» — показывается блок «Заявка на рассмотрении» без формы.

**Элементы:**
- Заголовок «Загрузка прайс-листа».
- Описание: загрузить Excel с колонками артикул, название, цена, количество.
- Выбор файла (.xlsx, .xls).
- Кнопка «Загрузить».
- Результат: «Прайс загружен», число созданных/обновленных/обработанных строк, при необходимости — «Уверенность распознавания колонок».

#### 2.10.2 Мои товары — `/vendor/products`

**Доступ:** как выше; при «ожидает одобрения» — сообщение без списка.

**Элементы:**
- Заголовок «Мои товары».
- Кнопка «Добавить товар».
- Таблица/список товаров: название, артикул, цена, остаток, кнопки «Редактировать», «Удалить».
- **Форма добавления/редактирования (модалка или отдельный блок):** название, артикул, цена, количество на складе, описание, характеристики (текст), состав, фото (загрузка нескольких, превью, удаление фото). Кнопки «Сохранить» / «Отмена».

#### 2.10.3 Склад — `/vendor/warehouse`

**Доступ:** как выше.

**Элементы:**
- Заголовок «Склад», подзаголовок про остатки.
- Сводка: в наличии / низкий остаток (≤5) / нет в наличии (счётчики).
- Список товаров: фото, название, артикул, остаток, бейдж «низкий остаток» или «нет в наличии»; ссылка «Редактировать» на страницу товара в «Моих товарах».

---

### 2.11 Админ-панель — `/admin/*`

**Доступ:** только роль `admin`.

**Боковое меню (AdminLayout):**
- Поле поиска (отправка → `/admin/search?q=...`).
- Дашборд, Пользователи, Заказы, Поставщики, Обращения.

#### 2.11.1 Дашборд — `/admin/dashboard`

- Карточки: всего заказов, выручка (₸), разбивка по статусам.
- Блок «Последние заказы» (таблица или список со ссылками на детали).
- Доп. аналитика при наличии.

#### 2.11.2 Пользователи — `/admin/users`

- Фильтр по роли (все / guest / user / farmer / vendor / admin).
- Таблица: ID, телефон, имя, роль, регион, компания (если есть); кнопка смены роли (выпадающий список).

#### 2.11.3 Заказы — `/admin/orders`

- Фильтр по статусу (все / New / Paid / Shipped / Delivered).
- Таблица: ID, покупатель, поставщик, сумма, статус, дата; ссылка «Подробнее» → деталь заказа.

#### 2.11.4 Деталь заказа — `/admin/orders/:orderId`

- Ссылка «← К списку заказов».
- Заголовок «Заказ #ID».
- Контакты: покупатель (телефон-ссылка), поставщик (телефон-ссылка).
- Статус, сумма, дата.
- Состав заказа (товары, количество, цены).

#### 2.11.5 Поставщики — `/admin/vendors`

- Заголовок «Заявки поставщиков (ожидают одобрения)».
- Список заявок: компания, БИН, телефон, имя пользователя; кнопка «Одобрить» (при необходимости — «Отклонить» в бэкенде, в UI может не быть).
- Пустое состояние: «Нет заявок на рассмотрении».

#### 2.11.6 Обращения — `/admin/feedback`

- Фильтр по статусу (все / open / in_progress / resolved).
- Таблица: ID, пользователь, тема, статус, дата; ссылка на деталь.

#### 2.11.7 Деталь обращения — `/admin/feedback/:ticketId`

- Ссылка «← К списку обращений».
- Тема, сообщение пользователя, контакт (телефон-ссылка для звонка).
- Поля для админа: статус (open / in_progress / resolved), заметки (textarea), текст ответа пользователю (textarea).
- Кнопка «Сохранить» (обновление статуса/заметок и отправка ответа в уведомлениях).

#### 2.11.8 Поиск — `/admin/search?q=...`

- Заголовок «Поиск: [запрос]».
- Результаты по категориям: пользователи, заказы, товары, компании, обращения — списки со ссылками на соответствующие сущности.
- Пустое состояние: «Ничего не найдено».

---

## 3. API-ФУНКЦИИ (для понимания данных)

Кратко, что делает бэкенд (для подписи полей и типов данных в Figma):

| Группа        | Метод  | Путь (пример)                    | Назначение |
|---------------|--------|-----------------------------------|------------|
| Auth          | POST   | /auth/request-otp                 | Запрос SMS-кода |
| Auth          | POST   | /auth/verify-otp                  | Вход по коду |
| Auth          | POST   | /auth/demo-login                 | Демо-вход (телефон + пароль) |
| Auth          | GET    | /auth/me                         | Текущий пользователь |
| Auth          | GET    | /auth/bin-lookup?bin=...         | Данные по БИН |
| Auth          | POST   | /auth/onboarding                 | Отправка онбординга |
| Products      | GET    | /products, /products/:id         | Список и карточка товара |
| Products      | POST   | /products/:id/reviews            | Добавить отзыв |
| Products      | GET    | /products/:id/reviews            | Список отзывов |
| Products      | POST   | /products/check-compatibility    | Проверка совместимости |
| Cart          | GET/POST/DELETE | /cart, /cart/items/*        | Корзина |
| Checkout      | POST   | /checkout                        | Оформление заказа |
| Orders        | GET    | /orders, /orders/:id             | Список и деталь заказа |
| Orders        | PATCH  | /orders/:id/status               | Смена статуса (админ) |
| Garage        | GET/POST/DELETE | /garage/machines/*           | Гараж |
| Machines      | GET    | /machines                        | Справочник техники |
| Categories    | GET    | /categories, /categories/tree   | Категории |
| Vendor        | POST   | /vendor/upload-pricelist        | Загрузка прайса |
| Vendor        | POST   | /vendor/upload-image             | Загрузка фото товара |
| Notifications | GET/PATCH | /notifications, /notifications/:id/read | Уведомления |
| Feedback      | POST   | /feedback                        | Создать обращение |
| Admin         | GET/PATCH/POST | /admin/users, /admin/orders, /admin/feedback, /admin/vendors/pending, /admin/vendors/:id/approve, /admin/dashboard, /admin/search | Управление |
| Chat          | POST   | /chat/message                    | Сообщение чат-боту |
| Search        | GET    | /search/suggest                  | Подсказки поиска |
| Recommendations | GET   | /recommendations, /recommendations/maintenance | Рекомендации и ТО |

---

## 4. РОЛИ И ДОСТУП

| Роль    | Каталог, товар, корзина | Вход | Онбординг | Гараж, заказы | Vendor (прайс, товары, склад) | Уведомления | Обратная связь | Админка |
|---------|--------------------------|------|------------|----------------|--------------------------------|-------------|----------------|--------|
| Гость   | ✓                        | ✓    | —          | —              | —                              | —           | ✓              | —      |
| user    | ✓                        | ✓    | —          | ✓              | —                              | —           | ✓              | —      |
| farmer  | ✓                        | ✓    | —          | ✓              | —                              | —           | ✓              | —      |
| vendor  | ✓                        | ✓    | —          | ✓              | ✓ (если одобрен)               | ✓           | ✓              | —      |
| admin   | ✓                        | ✓    | —          | ✓              | ✓                              | ✓           | ✓              | ✓      |

**Guest** — пользователь только что вошёл по OTP/demo и ещё не прошёл онбординг; видит только онбординг до выбора роли.

---

## 5. СОСТОЯНИЯ И ВАРИАНТЫ UI

Для Figma имеет смысл завести варианты/состояния:

- **Авторизация:** не авторизован / авторизован (user / farmer / vendor / admin).
- **Корзина:** пустая / с товарами.
- **Заказы:** пусто / есть заказы / ошибка.
- **Vendor:** ожидает одобрения / одобрен.
- **Формы:** пусто, ошибка, загрузка, успех.
- **Каталог:** загрузка (скелетон), пустой результат, список товаров; с выбранной техникой в гараже — виджет «текущая техника».
- **Чат:** закрыт / открыт; первое открытие — модалка с оговоркой.

Если нужно, могу вынести этот список в отдельный файл по экранам (один экран = один раздел с макетами для десктопа и мобилки).
